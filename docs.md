# Custom collection endpoint without collection auth settings

Add this code to **payload.config.ts**, alternatively create a route inside server.ts
Example:
Ddding this endpoint inside of the Users.ts collection file would not work, cause the auth settings for the collection would block it
this way we can make that the endpoint is available in the collection generated api route without the auth settings

```
endpoints: [
        {
            path: "/api/users/test",
            method: "get",
            handler: (req, res) => {
                res.send(200).send("OK");
            },
            root: true,
            // removes payload auth options etc.
        },
    ],
```

https://www.youtube.com/watch?v=HYO8OuLuTFw

# payloadcms json field - nested object => type:"group", fields:[...]

# payloadcms getting current document fields from a custom field using: const [fields, dispatchFields] = useAllFormFields();

# create an async queue when uploading wishes, we need to ensure to keep their order!!

# !! fetching wishes:

first we need to get the link with auth

"?win_mode=fullscreen&authkey_ver=1&sign_type=2&auth_appid=webview_gacha&init_type=301&gacha_id=76a7e27f899288807f4ce128314d45cf984e308e&timestamp=1706656555&lang=en&device_type=pc&game_version=OSRELWin4.4.0_R21147109_S20917735_D21129932&region=os_euro&authkey=jIyZ%2F1z1Vkv6zWUkyjeAOTBhwvcdOrqvj8NZV97JoujvilsVHB36yHupdduSS92WQeL0hxceZrs8YRAJxsHkBh0TShIIXKXWkcUQWx2m1QJP0O3s744%2BCzdd5PVSsdgpfkXhEKFUmJ5bPjV9GTJR25kUiFW8wOsYn7A3hsaJ9x52pW%2BqZ2BANUg8GBnboRwprVCRWQf08TcRitJj3jx4zqRD1B4Hylo881HnK6ypCA573FPUY9PN%2BENbwy3700R97xxhTrJ2B1lcBpfqAZtV%2FJO3yTcJhxXg7dA4klANQ1SMTLTg0Kcz0NCosgZwoyVk2SDXz%2B3nT7WOzwMok7D2sYHvrb09uWm2mnxfpyJMw4seILnA3HCPeCNBVZ3wkXmBXiT%2B%2FBb%2FH%2BoLDehCMdqfqR2m8tpQ%2BX1BK9Nxn5%2FsvwHoMlmWCyhuX6CU8Y%2FRLqNth62Ucwq4kQ4aZSNnq3tuaqD%2BB5A07LjkRKRhWyAl9QEHZ1f4doNJJL5WdIuiF1TPV4JqLyLbpqZfgjh9kBjAbrWJ8k5%2BdU05HTrcxzq5udgRujMVbPL3AndJuTwS0DzN4OgfvByCleN8czV6J8lOYLPUOm1o8aHr6jMIiBaNLdvFp5eFTM0vOgzw%2BVfIZotZdDfcqNTZIHFM2IbEJhNwRQ9Y0GOFMu1YRMAav6vBuItEdeK08LfB8MQF0%2BsTcEhmayNqqu%2Fo88ivKJv3OpLLxc45yCip%2BKmjulmIFsee9HIbblieBSdWv0jtpa%2FoQudFcdpjJoAxvT7T8BsIsrTjFSvDmYDQ6mtWGEX1zE3sVw9K8XiNJp4JOBdBa9g2epShqbEeDaH%2FgGnYQ4QyPmHx39WK9HtGKxEnQLKqobuB9vq6uyYAflS9nFw%2FRxds%2BvXPURsN4ymMT0KIEaqlX9aFi8ufhbg18%2FemCoKFE2kxtEDKB7HQIovGxw6lsPe2u%2BSq7E8NUwD1ca5sf2YewscPX%2FwCUYaIuIXebZEkew3bNmDtt5hRfgtiG5RA8DNDtpBnxyiuzaPiNGTUR6iVeS6Wa3PAq3h9ZZeNpikKSTowK1bmAmOGQYsEsnd%2B15Xb6gEK%2Bo8jDs0VmoMEHfJUfqUqy9e9Flgd7hc%2F5Y98y8jw0QFjp2qKvrq86BwqO1Aph6C8ncQDxUbYWAQNhgKRm1RKmU1IOZG1yb24%2BfdwT4moVpUc8ZUNvPjoH4%2FTyyDJte7AZL%2BKplz%2FBtlTn1YZcf8kQDbfDUfYOVs1rVgAM805wmbrY4%2BIfYSNC0SuO4wQzVUNTjpZwpHzKgnr%2FFSUTiGtGiO0pV2MofK5Qaushn7z56OHDi7a9sQDEwMdvrqchRuvXyeA0wXSowpSNOtxgRoPLg%3D%3D&game_biz=&gacha_type=100&size=20&lang=en-us&page=1&end_id=0"

https://gs.hoyoverse.com/genshin/event/e20190909gacha-v2/index.html?win_mode=fullscreen&authkey_ver=1&sign_type=2&auth_appid=webview_gacha&init_type=301&gacha_id=76a7e27f899288807f4ce128314d45cf984e308e&timestamp=1706656555&lang=en&device_type=pc&game_version=OSRELWin4.4.0_R21147109_S20917735_D21129932&region=os_euro&authkey=jIyZ%2f1z1Vkv6zWUkyjeAOTBhwvcdOrqvj8NZV97JoujvilsVHB36yHupdduSS92WQeL0hxceZrs8YRAJxsHkBh0TShIIXKXWkcUQWx2m1QJP0O3s744%2bCzdd5PVSsdgpfkXhEKFUmJ5bPjV9GTJR25kUiFW8wOsYn7A3hsaJ9x52pW%2bqZ2BANUg8GBnboRwprVCRWQf08TcRitJj3jx4zqRD1B4Hylo881HnK6ypCA573FPUY9PN%2bENbwy3700R97xxhTrJ2B1lcBpfqAZtV%2fJO3yTcJhxXg7dA4klANQ1SMTLTg0Kcz0NCosgZwoyVk2SDXz%2b3nT7WOzwMok7D2sYHvrb09uWm2mnxfpyJMw4seILnA3HCPeCNBVZ3wkXmBXiT%2b%2fBb%2fH%2boLDehCMdqfqR2m8tpQ%2bX1BK9Nxn5%2fsvwHoMlmWCyhuX6CU8Y%2fRLqNth62Ucwq4kQ4aZSNnq3tuaqD%2bB5A07LjkRKRhWyAl9QEHZ1f4doNJJL5WdIuiF1TPV4JqLyLbpqZfgjh9kBjAbrWJ8k5%2bdU05HTrcxzq5udgRujMVbPL3AndJuTwS0DzN4OgfvByCleN8czV6J8lOYLPUOm1o8aHr6jMIiBaNLdvFp5eFTM0vOgzw%2bVfIZotZdDfcqNTZIHFM2IbEJhNwRQ9Y0GOFMu1YRMAav6vBuItEdeK08LfB8MQF0%2bsTcEhmayNqqu%2fo88ivKJv3OpLLxc45yCip%2bKmjulmIFsee9HIbblieBSdWv0jtpa%2foQudFcdpjJoAxvT7T8BsIsrTjFSvDmYDQ6mtWGEX1zE3sVw9K8XiNJp4JOBdBa9g2epShqbEeDaH%2fgGnYQ4QyPmHx39WK9HtGKxEnQLKqobuB9vq6uyYAflS9nFw%2fRxds%2bvXPURsN4ymMT0KIEaqlX9aFi8ufhbg18%2femCoKFE2kxtEDKB7HQIovGxw6lsPe2u%2bSq7E8NUwD1ca5sf2YewscPX%2fwCUYaIuIXebZEkew3bNmDtt5hRfgtiG5RA8DNDtpBnxyiuzaPiNGTUR6iVeS6Wa3PAq3h9ZZeNpikKSTowK1bmAmOGQYsEsnd%2b15Xb6gEK%2bo8jDs0VmoMEHfJUfqUqy9e9Flgd7hc%2f5Y98y8jw0QFjp2qKvrq86BwqO1Aph6C8ncQDxUbYWAQNhgKRm1RKmU1IOZG1yb24%2bfdwT4moVpUc8ZUNvPjoH4%2fTyyDJte7AZL%2bKplz%2fBtlTn1YZcf8kQDbfDUfYOVs1rVgAM805wmbrY4%2bIfYSNC0SuO4wQzVUNTjpZwpHzKgnr%2fFSUTiGtGiO0pV2MofK5Qaushn7z56OHDi7a9sQDEwMdvrqchRuvXyeA0wXSowpSNOtxgRoPLg%3d%3d&game_biz=&gacha_type=100&size=20&lang=en-us&page=1&end_id=0

https://hk4e-api-os.hoyoverse.com/event/gacha_info/api/getGachaLog?win_mode=fullscreen&authkey_ver=1&sign_type=2&auth_appid=webview_gacha&init_type=301&gacha_id=76a7e27f899288807f4ce128314d45cf984e308e&timestamp=1706656555&lang=en&device_type=pc&game_version=OSRELWin4.4.0_R21147109_S20917735_D21129932&region=os_euro&authkey=jIyZ%2F1z1Vkv6zWUkyjeAOTBhwvcdOrqvj8NZV97JoujvilsVHB36yHupdduSS92WQeL0hxceZrs8YRAJxsHkBh0TShIIXKXWkcUQWx2m1QJP0O3s744%2BCzdd5PVSsdgpfkXhEKFUmJ5bPjV9GTJR25kUiFW8wOsYn7A3hsaJ9x52pW%2BqZ2BANUg8GBnboRwprVCRWQf08TcRitJj3jx4zqRD1B4Hylo881HnK6ypCA573FPUY9PN%2BENbwy3700R97xxhTrJ2B1lcBpfqAZtV%2FJO3yTcJhxXg7dA4klANQ1SMTLTg0Kcz0NCosgZwoyVk2SDXz%2B3nT7WOzwMok7D2sYHvrb09uWm2mnxfpyJMw4seILnA3HCPeCNBVZ3wkXmBXiT%2B%2FBb%2FH%2BoLDehCMdqfqR2m8tpQ%2BX1BK9Nxn5%2FsvwHoMlmWCyhuX6CU8Y%2FRLqNth62Ucwq4kQ4aZSNnq3tuaqD%2BB5A07LjkRKRhWyAl9QEHZ1f4doNJJL5WdIuiF1TPV4JqLyLbpqZfgjh9kBjAbrWJ8k5%2BdU05HTrcxzq5udgRujMVbPL3AndJuTwS0DzN4OgfvByCleN8czV6J8lOYLPUOm1o8aHr6jMIiBaNLdvFp5eFTM0vOgzw%2BVfIZotZdDfcqNTZIHFM2IbEJhNwRQ9Y0GOFMu1YRMAav6vBuItEdeK08LfB8MQF0%2BsTcEhmayNqqu%2Fo88ivKJv3OpLLxc45yCip%2BKmjulmIFsee9HIbblieBSdWv0jtpa%2FoQudFcdpjJoAxvT7T8BsIsrTjFSvDmYDQ6mtWGEX1zE3sVw9K8XiNJp4JOBdBa9g2epShqbEeDaH%2FgGnYQ4QyPmHx39WK9HtGKxEnQLKqobuB9vq6uyYAflS9nFw%2FRxds%2BvXPURsN4ymMT0KIEaqlX9aFi8ufhbg18%2FemCoKFE2kxtEDKB7HQIovGxw6lsPe2u%2BSq7E8NUwD1ca5sf2YewscPX%2FwCUYaIuIXebZEkew3bNmDtt5hRfgtiG5RA8DNDtpBnxyiuzaPiNGTUR6iVeS6Wa3PAq3h9ZZeNpikKSTowK1bmAmOGQYsEsnd%2B15Xb6gEK%2Bo8jDs0VmoMEHfJUfqUqy9e9Flgd7hc%2F5Y98y8jw0QFjp2qKvrq86BwqO1Aph6C8ncQDxUbYWAQNhgKRm1RKmU1IOZG1yb24%2BfdwT4moVpUc8ZUNvPjoH4%2FTyyDJte7AZL%2BKplz%2FBtlTn1YZcf8kQDbfDUfYOVs1rVgAM805wmbrY4%2BIfYSNC0SuO4wQzVUNTjpZwpHzKgnr%2FFSUTiGtGiO0pV2MofK5Qaushn7z56OHDi7a9sQDEwMdvrqchRuvXyeA0wXSowpSNOtxgRoPLg%3D%3D&game_biz=&gacha_type=200&size=20&page=3&end_id=1701605160000334009&lang=en-us

fetching wish history:
locate &game_biz=
change gacha_type
gacha_type = 200 - standard, 301 - character, 302 - weapon
max size can be set to 20, page does not matter, keep =1, keep lang=en-us
change region=os_euro based on account region
first fetch the first batch of wishes per each banner, then after getting the first 20 pulls, take the last pull and save the "id" property value, use this value for the next request
this new request will have an extra path param: end_id= , this will be equal to the previously saved id

https://hk4e-api-os.hoyoverse.com/event/gacha_info/api/getGachaLog?win_mode=fullscreen&authkey_ver=1&sign_type=2&auth_appid=webview_gacha&init_type=301&gacha_id=76a7e27f899288807f4ce128314d45cf984e308e&timestamp=1706656555&lang=en&device_type=pc&game_version=OSRELWin4.4.0_R21147109_S20917735_D21129932&region=os_euro&authkey=jIyZ%2F1z1Vkv6zWUkyjeAOTBhwvcdOrqvj8NZV97JoujvilsVHB36yHupdduSS92WQeL0hxceZrs8YRAJxsHkBh0TShIIXKXWkcUQWx2m1QJP0O3s744%2BCzdd5PVSsdgpfkXhEKFUmJ5bPjV9GTJR25kUiFW8wOsYn7A3hsaJ9x52pW%2BqZ2BANUg8GBnboRwprVCRWQf08TcRitJj3jx4zqRD1B4Hylo881HnK6ypCA573FPUY9PN%2BENbwy3700R97xxhTrJ2B1lcBpfqAZtV%2FJO3yTcJhxXg7dA4klANQ1SMTLTg0Kcz0NCosgZwoyVk2SDXz%2B3nT7WOzwMok7D2sYHvrb09uWm2mnxfpyJMw4seILnA3HCPeCNBVZ3wkXmBXiT%2B%2FBb%2FH%2BoLDehCMdqfqR2m8tpQ%2BX1BK9Nxn5%2FsvwHoMlmWCyhuX6CU8Y%2FRLqNth62Ucwq4kQ4aZSNnq3tuaqD%2BB5A07LjkRKRhWyAl9QEHZ1f4doNJJL5WdIuiF1TPV4JqLyLbpqZfgjh9kBjAbrWJ8k5%2BdU05HTrcxzq5udgRujMVbPL3AndJuTwS0DzN4OgfvByCleN8czV6J8lOYLPUOm1o8aHr6jMIiBaNLdvFp5eFTM0vOgzw%2BVfIZotZdDfcqNTZIHFM2IbEJhNwRQ9Y0GOFMu1YRMAav6vBuItEdeK08LfB8MQF0%2BsTcEhmayNqqu%2Fo88ivKJv3OpLLxc45yCip%2BKmjulmIFsee9HIbblieBSdWv0jtpa%2FoQudFcdpjJoAxvT7T8BsIsrTjFSvDmYDQ6mtWGEX1zE3sVw9K8XiNJp4JOBdBa9g2epShqbEeDaH%2FgGnYQ4QyPmHx39WK9HtGKxEnQLKqobuB9vq6uyYAflS9nFw%2FRxds%2BvXPURsN4ymMT0KIEaqlX9aFi8ufhbg18%2FemCoKFE2kxtEDKB7HQIovGxw6lsPe2u%2BSq7E8NUwD1ca5sf2YewscPX%2FwCUYaIuIXebZEkew3bNmDtt5hRfgtiG5RA8DNDtpBnxyiuzaPiNGTUR6iVeS6Wa3PAq3h9ZZeNpikKSTowK1bmAmOGQYsEsnd%2B15Xb6gEK%2Bo8jDs0VmoMEHfJUfqUqy9e9Flgd7hc%2F5Y98y8jw0QFjp2qKvrq86BwqO1Aph6C8ncQDxUbYWAQNhgKRm1RKmU1IOZG1yb24%2BfdwT4moVpUc8ZUNvPjoH4%2FTyyDJte7AZL%2BKplz%2FBtlTn1YZcf8kQDbfDUfYOVs1rVgAM805wmbrY4%2BIfYSNC0SuO4wQzVUNTjpZwpHzKgnr%2FFSUTiGtGiO0pV2MofK5Qaushn7z56OHDi7a9sQDEwMdvrqchRuvXyeA0wXSowpSNOtxgRoPLg%3D%3D&game_biz=&gacha_type=200&size=20&page=1&lang=en-us
